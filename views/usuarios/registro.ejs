<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head.ejs') %>

    <body>
        <%- include('../partials/header.ejs') %>

            <main id="registro">
                <section class="flex">
                    <div class="ancho-full centrado">
                        <h1>FORMULARIO DE REGISTRO</h1>
                    </div>
                    <% if (locals.errors) { %>
                        <div class="msg-error">
                            <p><b>Atencion!</b> se han encontrado los siguientes errores en el formulario.</p>
                            <p>
                            <ul>
                                <% for (error of locals.errors) { %>
                                    <li>
                                        <%= error.msg %>
                                    </li>
                                    <% } %>
                            </ul>
                            </p>
                        </div>
                        <% } %>
                            <form id="formularioRegistro" class="flex" action="/usuarios/registro" method="POST">

                                <div class="ancho-full centrado">
                                    <input type="email" name="email" id="email" placeholder="Correo electronico">

                                </div>
                                <div class="ancho-half centrado">
                                    <input type="password" name="password" id="password" placeholder="ContraseÃ±a">

                                </div>
                                <div class="ancho-half centrado ">
                                    <input type="text" name="nombre" id="nombre" placeholder="Nombre">

                                </div>
                                <div class="ancho-half centrado ">
                                    <input type="text" name="Apellido" id="Apellido" placeholder="Apellido">

                                </div>
                                <div class="ancho-half centrado ">
                                    <input type="text" name="Fechadenacimiento" id="Fechadenacimiento"
                                        placeholder="Fecha de Nacimiento" onfocus="(this.type='date')">

                                </div>
                                <div class="ancho-half centrado ">
                                    <input type="tel" name="telefono" id="telefono" placeholder="Telefono">

                                </div>
                                <div class="ancho-half centrado ">
                                    <select type="text" name="localidad" id="localidad">
                                        <% for (localidad of localidades) { %>
                                            <option value="<%= localidad.id %>">
                                                <%= localidad.name %>
                                            </option>
                                            <% } %>
                                    </select>
                                </div>
                                <div class="ancho-half centrado ">
                                    <input type="text" name="calleyaltura" id="calleyaltura"
                                        placeholder="Calle y altura">

                                </div>
                                <div class="ancho-half espaciado ">
                                    <div class="ancho-quarter centrado ">
                                        <input type="number" name="piso" id="piso" placeholder="Piso" maxlength="2">

                                    </div>
                                    <div class="ancho-quarter  centrado ">
                                        <input type="text" name="dpto" id="dpto" placeholder="Dpto" maxlength="1">

                                    </div>
                                </div>
                                <div class="ancho-full centrado">
                                    <button type="submit" id="ingresar">Registrate</button>
                                </div>
                                <div class="ancho-full espaciado">
                                    <div>
                                        <a href="javascript:history.back()">Volver</a>
                                    </div>
                                    <div>
                                        <a href="ingreso">Ingresar</a>
                                    </div>
                                </div>
                            </form>
                </section>
            </main>
            <%- include('../partials/footer.ejs') %>

            <script>
                window.addEventListener('load', function () {

                    let formulario = document.querySelector('#formularioRegistro');

                    let campoEmail = document.querySelector('#email');
                    let campoPassword = document.querySelector('#password');
                    let campoApellido = document.querySelector('#Apellido');
                    let campoFechadenacimiento = document.querySelector('#Fechadenacimiento');
                    let campoTelefono = document.querySelector('#telefono');
                    let campoLocalidad = document.querySelector('#localidad');
                    let campoCalleyaltura = document.querySelector('#calleyaltura');

                    let errores = [];
                    
                    formulario.addEventListener('submit', (e) => {
                        e.preventDefault();
                        
                        if(campoEmail.value == ""){
                            errores.push('El campo de email debe de estar completo')
                        }

                        if(campoPassword.value == ""){
                            errores.push('El campo de password debe de estar completo')
                        }

                        if(campoApellido.value == ""){
                            errores.push('El campo de apellido debe de estar completo')
                        }

                        if(campoFechadenacimiento.value == ""){
                            errores.push('El campo de fecha de nacimiento debe de estar completo')
                        }

                        if(campoTelefono.value == ""){
                            errores.push('El campo de telefono debe de estar completo')
                        }

                        if(campoLocalidad.value == ""){
                            errores.push('El campo de localidad debe de estar completo')
                        }

                        if(campoCalleyaltura.value == ""){
                            errores.push('El campo de calle y altura debe de estar completo')
                        }
                        
                    })
                });
            </script>

    </body>

</html>