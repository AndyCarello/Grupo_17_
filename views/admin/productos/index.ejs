<!DOCTYPE html>
<html lang="en">
<%- include('../../partials/head.ejs') %>

    <body>
        <%- include('../../partials/header.ejs') %>
        <main class="admin">
            <section class="flex">
                <div class="ancho-full centrado">
                    <h1>
                        <!--imprimo el titulo que le paso en el render del controller-->
                        <%= title %> | <a href="/productos/crear"><i class="fas fa-plus"></i></a> 
                    </h1> 
                </div>

                <!-- Hago un for of de todos los productos que recibo por el render 
                    por cada producto imprimo una etiqueta con el nombre y tres formularios 
                    ver y actualizar(get), te llevan a los metodos del controlador ya existentes
                    eliminar(delete) elimina el producto desde el controlador de admin

                    Ver y actualizar podrian ser botones con un link pero son todos formularios
                    por que con un solo estilo alineaba a todos por igual
                -->
                <ul>
                <% for (producto of productos) { %>
                    <li>
                        <div>
                            <%= producto.name %>
                        </div>
                        <div class="botones">
                            <form action="/productos/<%= producto.id %>" method="get">
                                <button type="submit"><span class="fas fa-eye"></span></button>
                            </form>
                            
                            <form action="/productos/actualizar/<%= producto.id %>" method="get">
                                <button type="submit"><span class="fas fa-edit"></span></button>
                            </form>
                            <form action="/admin/productos/<%= producto.id %>?_method=DELETE" method="post">
                                <button type="submit"><span class="fas fa-trash"></span></button>
                            </form>
                        </div>
                    </li>
                <% } %>
                </ul>
            </section>
        </main>
        <%- include('../../partials/footer.ejs') %>
    </body>

</html>